var Xe=Object.create;var{defineProperty:Vt,getPrototypeOf:Je,getOwnPropertyNames:Ge}=Object;var tr=Object.prototype.hasOwnProperty;var er=(r,u,i)=>{i=r!=null?Xe(Je(r)):{};const d=u||!r||!r.__esModule?Vt(i,"default",{value:r,enumerable:!0}):i;for(let l of Ge(r))if(!tr.call(d,l))Vt(d,l,{get:()=>r[l],enumerable:!0});return d};var rr=(r)=>{return import.meta.require(r)};var et=(r,u)=>{for(var i in u)Vt(r,i,{get:u[i],enumerable:!0,configurable:!0,set:(d)=>u[i]=()=>d})};var _t={};et(_t,{state:()=>{{return cr}},handler:()=>{{return dr}},default:()=>{{return lr}},context:()=>{{return or}},_static:()=>{{return ar}}});var Dt={};et(Dt,{default:()=>{{return nr}}});var nr=`
<section>
  Home
  <footer></footer>
</section>
`;var At={};et(At,{default:()=>{{return ir}}});var ir=`
<section>
  User Account ID: <span text=input.query.userid></span>
</section>
`;var Kt={};et(Kt,{default:()=>{{return ur}}});var ur=`
<section>
  <p>Product ID: <span text=input.params.id></span></p>
  <p>Product Category: <span text=input.query.category></span></p>
</section>
`;var ar={routes:[{path:"/",template:Dt,default:!0},{path:"/account",template:At},{path:"/product/:id",template:Kt}]},cr={initial:3},or=["online"],dr={onRouteChange(...r){console.log("Route changed -- ",...r)},onPageNotFound(r){console.log(`<${r}> page not found`)}},lr=`
<main>
  <router routes=static.routes
          global
          on-after="onRouteChange, 'after'"
          on-before="onRouteChange, 'before'"
          on-not-found="onPageNotFound"></router>

  <section style="{ border: '2px solid gray', margin: '3rem', padding: '15px' }">
    <counter initial=state.initial
              on-update="value => console.log( value )">
      Count till 12
    </counter>

    <counter initial=1>
      Note: 10
    </counter>

    <p>I'm <span text="context.online ? 'Online' : 'Offline'"></span></p>

    <br><br>
    <button on-click="() => state.initial = 10">Reinitialize</button>
    <button title="Undo"
            style="background: black;color: white" 
            on-click="() => self.destroy()">Destroy</button>
    <br>
    <profile></profile>
    <footer></footer>
  </section>
</main>
`;var qt={};et(qt,{stylesheet:()=>{{return vr}},state:()=>{{return fr}},handler:()=>{{return sr}},default:()=>{{return br}},context:()=>{{return hr}},_static:()=>{{return $r}}});var $r={limit:12},hr=["lang"],fr={count:0},sr={onInput(){this.state.count=Number(this.input.initial)},handleClick(r){if(this.state.count>=this.static.limit)return;this.state.count++,this.emit("update",this.state.count)}},vr=`
  span { font: 14px arial; color: blue; }
`,br=`<div>
  <span html=input.__innerHtml></span>: 
  <span text="state.count"></span>
  <br>
  <button on-click="handleClick">
    <span text="Count"></span>
    (<span text=context.lang></span>)
  </button>
</div>`;var wt={};et(wt,{stylesheet:()=>{{return xr}},default:()=>{{return yr}},context:()=>{{return Cr}}});var Cr=["getUser"],xr=`
  * { font-family: helvetica }
`,yr=`
<async await="context.getUser, 'Peter Giligous'">
  <preload>Preloading...</preload>
  <resolve>
    <div>
      <ul style="{ border: '1px solid black', padding: '15px' }">
        <li text=response.name></li>
        <li text=response.email></li>
      </ul>

      <counter initial=5 on-update="value => console.log('procount --', value )">By</counter>
    </div>
  </resolve>
  <catch><span text=error></span></catch>
</async>
`;var Lt={};et(Lt,{default:()=>{{return Nr}},_static:()=>{{return Or}}});var Or={content:"Nexted counter component"},Nr=`<p>
  <small style="color:gray" text=static.content>...</small>
</p>`;var ce=(r)=>{r.register("counter",qt),r.register("profile",wt),r.register("footer",Lt)};var lt=function(r,u){if(typeof r!=="object"||typeof u!=="object")return null;const i=Object.keys(r).sort(),d=Object.keys(u).sort();if(i.length!==d.length)return!1;if(i.join("")!==d.join(""))return!1;for(let l=0;l<i.length;++l)if(r[i[l]]instanceof Array){if(!(u[i[l]]instanceof Array))return!1;if(!lt(r[i[l]],u[i[l]]))return!1}else if(r[i[l]]instanceof Date){if(!(u[i[l]]instanceof Date))return!1;if(String(r[i[l]])!==String(u[i[l]]))return!1}else if(r[i[l]]instanceof Function){if(!(u[i[l]]instanceof Function))return!1}else if(r[i[l]]instanceof Object){if(!(u[i[l]]instanceof Object))return!1;if(r[i[l]]===r){if(u[i[l]]!==u)return!1}else if(!lt(r[i[l]],u[i[l]]))return!1}else if(r[i[l]]!==u[i[l]])return!1;return!0},ut=function(r){if(typeof r!=="object")return r;return JSON.parse(JSON.stringify(r))},Ct=function(r){const u=new Set;return[()=>{const i=xt[xt.length-1];return i&&Pr(i,u),r},(i)=>{r=i;for(let d of[...u])d.execute()}]},fe=function(r){const u=()=>{Rr(i),xt.push(i);try{r()}finally{xt.pop()}},i={execute:u,dependencies:new Set};u()},mr=Object.create,{defineProperty:Ht,getPrototypeOf:gr,getOwnPropertyNames:jr}=Object,kr=Object.prototype.hasOwnProperty,oe=(r,u,i)=>{i=r!=null?mr(gr(r)):{};const d=u||!r||!r.__esModule?Ht(i,"default",{value:r,enumerable:!0}):i;for(let l of jr(r))if(!kr.call(d,l))Ht(d,l,{get:()=>r[l],enumerable:!0});return d},pr=(r,u)=>()=>(u||r((u={exports:{}}).exports,u),u.exports);var Er=(r,u)=>{for(var i in u)Ht(r,i,{get:u[i],enumerable:!0,configurable:!0,set:(d)=>u[i]=()=>d})},de=pr((r,u)=>{(function(){var i=document,d=window,l=i.documentElement,E=i.createElement.bind(i),k=E("div"),m=E("table"),j=E("tbody"),K=E("tr"),Z=Array.isArray,_=Array.prototype,f=_.concat,b=_.filter,O=_.indexOf,g=_.map,N=_.push,y=_.slice,C=_.some,p=_.splice,V=/^#(?:[\w-]|\\.|[^\x00-\xa0])*$/,H=/^\.(?:[\w-]|\\.|[^\x00-\xa0])*$/,ct=/<.+>/,W=/^\w+$/;function U(t,e){var n=Ce(e);return!t||!n&&!J(e)&&!S(e)?[]:!n&&H.test(t)?e.getElementsByClassName(t.slice(1).replace(/\\/g,"")):!n&&W.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t)}var $t=function(){function t(e,n){if(!e)return;if(ot(e))return e;var a=e;if(D(e)){var o=n||i;if(a=V.test(e)&&J(o)?o.getElementById(e.slice(1).replace(/\\/g,"")):ct.test(e)?Qt(e):ot(o)?o.find(e):D(o)?s(o).find(e):U(e,o),!a)return}else if(G(e))return this.ready(e);if(a.nodeType||a===d)a=[a];this.length=a.length;for(var h=0,v=this.length;h<v;h++)this[h]=a[h]}return t.prototype.init=function(e,n){return new t(e,n)},t}(),c=$t.prototype,s=c.init;if(s.fn=s.prototype=c,c.length=0,c.splice=p,typeof Symbol==="function")c[Symbol.iterator]=_[Symbol.iterator];function ot(t){return t instanceof $t}function rt(t){return!!t&&t===t.window}function J(t){return!!t&&t.nodeType===9}function Ce(t){return!!t&&t.nodeType===11}function S(t){return!!t&&t.nodeType===1}function xe(t){return!!t&&t.nodeType===3}function ye(t){return typeof t==="boolean"}function G(t){return typeof t==="function"}function D(t){return typeof t==="string"}function q(t){return t===void 0}function dt(t){return t===null}function Mt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function yt(t){if(typeof t!=="object"||t===null)return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}s.isWindow=rt,s.isFunction=G,s.isArray=Z,s.isNumeric=Mt,s.isPlainObject=yt;function P(t,e,n){if(n){var a=t.length;while(a--)if(e.call(t[a],a,t[a])===!1)return t}else if(yt(t)){var o=Object.keys(t);for(var a=0,h=o.length;a<h;a++){var v=o[a];if(e.call(t[v],v,t[v])===!1)return t}}else for(var a=0,h=t.length;a<h;a++)if(e.call(t[a],a,t[a])===!1)return t;return t}s.each=P,c.each=function(t){return P(this,t)},c.empty=function(){return this.each(function(t,e){while(e.firstChild)e.removeChild(e.firstChild)})};function ht(){var t=[];for(var e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ye(t[0])?t.shift():!1,a=t.shift(),o=t.length;if(!a)return{};if(!o)return ht(n,s,a);for(var h=0;h<o;h++){var v=t[h];for(var x in v)if(n&&(Z(v[x])||yt(v[x]))){if(!a[x]||a[x].constructor!==v[x].constructor)a[x]=new v[x].constructor;ht(n,a[x],v[x])}else a[x]=v[x]}return a}s.extend=ht,c.extend=function(t){return ht(c,t)};var Oe=/\S+/g;function ft(t){return D(t)?t.match(Oe)||[]:[]}c.toggleClass=function(t,e){var n=ft(t),a=!q(e);return this.each(function(o,h){if(!S(h))return;P(n,function(v,x){if(a)e?h.classList.add(x):h.classList.remove(x);else h.classList.toggle(x)})})},c.addClass=function(t){return this.toggleClass(t,!0)},c.removeAttr=function(t){var e=ft(t);return this.each(function(n,a){if(!S(a))return;P(e,function(o,h){a.removeAttribute(h)})})};function Ne(t,e){if(!t)return;if(D(t)){if(arguments.length<2){if(!this[0]||!S(this[0]))return;var n=this[0].getAttribute(t);return dt(n)?void 0:n}if(q(e))return this;if(dt(e))return this.removeAttr(t);return this.each(function(o,h){if(!S(h))return;h.setAttribute(t,e)})}for(var a in t)this.attr(a,t[a]);return this}c.attr=Ne,c.removeClass=function(t){if(arguments.length)return this.toggleClass(t,!1);return this.attr("class","")},c.hasClass=function(t){return!!t&&C.call(this,function(e){return S(e)&&e.classList.contains(t)})},c.get=function(t){if(q(t))return y.call(this);return t=Number(t),this[t<0?t+this.length:t]},c.eq=function(t){return s(this.get(t))},c.first=function(){return this.eq(0)},c.last=function(){return this.eq(-1)};function me(t){if(q(t))return this.get().map(function(e){return S(e)||xe(e)?e.textContent:""}).join("");return this.each(function(e,n){if(!S(n))return;n.textContent=t})}c.text=me;function z(t,e,n){if(!S(t))return;var a=d.getComputedStyle(t,null);return n?a.getPropertyValue(e)||void 0:a[e]||t.style[e]}function B(t,e){return parseInt(z(t,e),10)||0}function Bt(t,e){return B(t,"border".concat(e?"Left":"Top","Width"))+B(t,"padding".concat(e?"Left":"Top"))+B(t,"padding".concat(e?"Right":"Bottom"))+B(t,"border".concat(e?"Right":"Bottom","Width"))}var Ot={};function ge(t){if(Ot[t])return Ot[t];var e=E(t);i.body.insertBefore(e,null);var n=z(e,"display");return i.body.removeChild(e),Ot[t]=n!=="none"?n:"block"}function It(t){return z(t,"display")==="none"}function Wt(t,e){var n=t&&(t.matches||t.webkitMatchesSelector||t.msMatchesSelector);return!!n&&!!e&&n.call(t,e)}function st(t){return D(t)?function(e,n){return Wt(n,t)}:G(t)?t:ot(t)?function(e,n){return t.is(n)}:!t?function(){return!1}:function(e,n){return n===t}}c.filter=function(t){var e=st(t);return s(b.call(this,function(n,a){return e.call(n,a,n)}))};function Y(t,e){return!e?t:t.filter(e)}c.detach=function(t){return Y(this,t).each(function(e,n){if(n.parentNode)n.parentNode.removeChild(n)}),this};var je=/^\s*<(\w+)[^>]*>/,ke=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,zt={"*":k,tr:j,td:K,th:K,thead:m,tbody:m,tfoot:m};function Qt(t){if(!D(t))return[];if(ke.test(t))return[E(RegExp.$1)];var e=je.test(t)&&RegExp.$1,n=zt[e]||zt["*"];return n.innerHTML=t,s(n.childNodes).detach().get()}s.parseHTML=Qt,c.has=function(t){var e=D(t)?function(n,a){return U(t,a).length}:function(n,a){return a.contains(t)};return this.filter(e)},c.not=function(t){var e=st(t);return this.filter(function(n,a){return(!D(t)||S(a))&&!e.call(a,n,a)})};function Q(t,e,n,a){var o=[],h=G(e),v=a&&st(a);for(var x=0,T=t.length;x<T;x++)if(h){var F=e(t[x]);if(F.length)N.apply(o,F)}else{var w=t[x][e];while(w!=null){if(a&&v(-1,w))break;o.push(w),w=n?w[e]:null}}return o}function Zt(t){if(t.multiple&&t.options)return Q(b.call(t.options,function(e){return e.selected&&!e.disabled&&!e.parentNode.disabled}),"value");return t.value||""}function pe(t){if(!arguments.length)return this[0]&&Zt(this[0]);return this.each(function(e,n){var a=n.multiple&&n.options;if(a||ae.test(n.type)){var o=Z(t)?g.call(t,String):dt(t)?[]:[String(t)];if(a)P(n.options,function(h,v){v.selected=o.indexOf(v.value)>=0},!0);else n.checked=o.indexOf(n.value)>=0}else n.value=q(t)||dt(t)?"":t})}c.val=pe,c.is=function(t){var e=st(t);return C.call(this,function(n,a){return e.call(n,a,n)})},s.guid=1;function I(t){return t.length>1?b.call(t,function(e,n,a){return O.call(a,e)===n}):t}s.unique=I,c.add=function(t,e){return s(I(this.get().concat(s(t,e).get())))},c.children=function(t){return Y(s(I(Q(this,function(e){return e.children}))),t)},c.parent=function(t){return Y(s(I(Q(this,"parentNode"))),t)},c.index=function(t){var e=t?s(t)[0]:this[0],n=t?this:s(e).parent().children();return O.call(n,e)},c.closest=function(t){var e=this.filter(t);if(e.length)return e;var n=this.parent();if(!n.length)return e;return n.closest(t)},c.siblings=function(t){return Y(s(I(Q(this,function(e){return s(e).parent().children().not(e)}))),t)},c.find=function(t){return s(I(Q(this,function(e){return U(t,e)})))};var Ee=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Se=/^$|^module$|\/(java|ecma)script/i,Fe=["type","src","nonce","noModule"];function Pe(t,e){var n=s(t);n.filter("script").add(n.find("script")).each(function(a,o){if(Se.test(o.type)&&l.contains(o)){var h=E("script");h.text=o.textContent.replace(Ee,""),P(Fe,function(v,x){if(o[x])h[x]=o[x]}),e.head.insertBefore(h,null),e.head.removeChild(h)}})}function Re(t,e,n,a,o){if(a)t.insertBefore(e,n?t.firstChild:null);else if(t.nodeName==="HTML")t.parentNode.replaceChild(e,t);else t.parentNode.insertBefore(e,n?t:t.nextSibling);if(o)Pe(e,t.ownerDocument)}function X(t,e,n,a,o,h,v,x){return P(t,function(T,F){P(s(F),function(w,tt){P(s(e),function(M,bt){var St=n?tt:bt,Ft=n?bt:tt,L=n?w:M;Re(St,!L?Ft:Ft.cloneNode(!0),a,o,!L)},x)},v)},h),e}c.after=function(){return X(arguments,this,!1,!1,!1,!0,!0)},c.append=function(){return X(arguments,this,!1,!1,!0)};function Ve(t){if(!arguments.length)return this[0]&&this[0].innerHTML;if(q(t))return this;var e=/<script[\s>]/.test(t);return this.each(function(n,a){if(!S(a))return;if(e)s(a).empty().append(t);else a.innerHTML=t})}c.html=Ve,c.appendTo=function(t){return X(arguments,this,!0,!1,!0)},c.wrapInner=function(t){return this.each(function(e,n){var a=s(n),o=a.contents();o.length?o.wrapAll(t):a.append(t)})},c.before=function(){return X(arguments,this,!1,!0)},c.wrapAll=function(t){var e=s(t),n=e[0];while(n.children.length)n=n.firstElementChild;return this.first().before(e),this.appendTo(n)},c.wrap=function(t){return this.each(function(e,n){var a=s(t)[0];s(n).wrapAll(!e?a:a.cloneNode(!0))})},c.insertAfter=function(t){return X(arguments,this,!0,!1,!1,!1,!1,!0)},c.insertBefore=function(t){return X(arguments,this,!0,!0)},c.prepend=function(){return X(arguments,this,!1,!0,!0,!0,!0)},c.prependTo=function(t){return X(arguments,this,!0,!0,!0,!1,!1,!0)},c.contents=function(){return s(I(Q(this,function(t){return t.tagName==="IFRAME"?[t.contentDocument]:t.tagName==="TEMPLATE"?t.content.childNodes:t.childNodes})))},c.next=function(t,e,n){return Y(s(I(Q(this,"nextElementSibling",e,n))),t)},c.nextAll=function(t){return this.next(t,!0)},c.nextUntil=function(t,e){return this.next(e,!0,t)},c.parents=function(t,e){return Y(s(I(Q(this,"parentElement",!0,e))),t)},c.parentsUntil=function(t,e){return this.parents(e,t)},c.prev=function(t,e,n){return Y(s(I(Q(this,"previousElementSibling",e,n))),t)},c.prevAll=function(t){return this.prev(t,!0)},c.prevUntil=function(t,e){return this.prev(e,!0,t)},c.map=function(t){return s(f.apply([],g.call(this,function(e,n){return t.call(e,n,e)})))},c.clone=function(){return this.map(function(t,e){return e.cloneNode(!0)})},c.offsetParent=function(){return this.map(function(t,e){var n=e.offsetParent;while(n&&z(n,"position")==="static")n=n.offsetParent;return n||l})},c.slice=function(t,e){return s(y.call(this,t,e))};var De=/-([a-z])/g;function Nt(t){return t.replace(De,function(e,n){return n.toUpperCase()})}c.ready=function(t){var e=function(){return setTimeout(t,0,s)};if(i.readyState!=="loading")e();else i.addEventListener("DOMContentLoaded",e);return this},c.unwrap=function(){return this.parent().each(function(t,e){if(e.tagName==="BODY")return;var n=s(e);n.replaceWith(n.children())}),this},c.offset=function(){var t=this[0];if(!t)return;var e=t.getBoundingClientRect();return{top:e.top+d.pageYOffset,left:e.left+d.pageXOffset}},c.position=function(){var t=this[0];if(!t)return;var e=z(t,"position")==="fixed",n=e?t.getBoundingClientRect():this.offset();if(!e){var a=t.ownerDocument,o=t.offsetParent||a.documentElement;while((o===a.body||o===a.documentElement)&&z(o,"position")==="static")o=o.parentNode;if(o!==t&&S(o)){var h=s(o).offset();n.top-=h.top+B(o,"borderTopWidth"),n.left-=h.left+B(o,"borderLeftWidth")}}return{top:n.top-B(t,"marginTop"),left:n.left-B(t,"marginLeft")}};var Yt={class:"className",contenteditable:"contentEditable",for:"htmlFor",readonly:"readOnly",maxlength:"maxLength",tabindex:"tabIndex",colspan:"colSpan",rowspan:"rowSpan",usemap:"useMap"};c.prop=function(t,e){if(!t)return;if(D(t)){if(t=Yt[t]||t,arguments.length<2)return this[0]&&this[0][t];return this.each(function(a,o){o[t]=e})}for(var n in t)this.prop(n,t[n]);return this},c.removeProp=function(t){return this.each(function(e,n){delete n[Yt[t]||t]})};var Ae=/^--/;function mt(t){return Ae.test(t)}var gt={},Ke=k.style,_e=["webkit","moz","ms"];function qe(t,e){if(e===void 0)e=mt(t);if(e)return t;if(!gt[t]){var n=Nt(t),a="".concat(n[0].toUpperCase()).concat(n.slice(1)),o="".concat(n," ").concat(_e.join("".concat(a," "))).concat(a).split(" ");P(o,function(h,v){if(v in Ke)return gt[t]=v,!1})}return gt[t]}var we={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function Xt(t,e,n){if(n===void 0)n=mt(t);return!n&&!we[t]&&Mt(e)?"".concat(e,"px"):e}function Le(t,e){if(D(t)){var n=mt(t);if(t=qe(t,n),arguments.length<2)return this[0]&&z(this[0],t,n);if(!t)return this;return e=Xt(t,e,n),this.each(function(o,h){if(!S(h))return;if(n)h.style.setProperty(t,e);else h.style[t]=e})}for(var a in t)this.css(a,t[a]);return this}c.css=Le;function Jt(t,e){try{return t(e)}catch(n){return e}}var He=/^\s+|\s+$/;function Gt(t,e){var n=t.dataset[e]||t.dataset[Nt(e)];if(He.test(n))return n;return Jt(JSON.parse,n)}function Ue(t,e,n){n=Jt(JSON.stringify,n),t.dataset[Nt(e)]=n}function Te(t,e){if(!t){if(!this[0])return;var n={};for(var a in this[0].dataset)n[a]=Gt(this[0],a);return n}if(D(t)){if(arguments.length<2)return this[0]&&Gt(this[0],t);if(q(e))return this;return this.each(function(o,h){Ue(h,t,e)})}for(var a in t)this.data(a,t[a]);return this}c.data=Te;function te(t,e){var n=t.documentElement;return Math.max(t.body["scroll".concat(e)],n["scroll".concat(e)],t.body["offset".concat(e)],n["offset".concat(e)],n["client".concat(e)])}P([!0,!1],function(t,e){P(["Width","Height"],function(n,a){var o="".concat(e?"outer":"inner").concat(a);c[o]=function(h){if(!this[0])return;if(rt(this[0]))return e?this[0]["inner".concat(a)]:this[0].document.documentElement["client".concat(a)];if(J(this[0]))return te(this[0],a);return this[0]["".concat(e?"offset":"client").concat(a)]+(h&&e?B(this[0],"margin".concat(n?"Top":"Left"))+B(this[0],"margin".concat(n?"Bottom":"Right")):0)}})}),P(["Width","Height"],function(t,e){var n=e.toLowerCase();c[n]=function(a){if(!this[0])return q(a)?void 0:this;if(!arguments.length){if(rt(this[0]))return this[0].document.documentElement["client".concat(e)];if(J(this[0]))return te(this[0],e);return this[0].getBoundingClientRect()[n]-Bt(this[0],!t)}var o=parseInt(a,10);return this.each(function(h,v){if(!S(v))return;var x=z(v,"boxSizing");v.style[n]=Xt(n,o+(x==="border-box"?Bt(v,!t):0))})}});var ee="___cd";c.toggle=function(t){return this.each(function(e,n){if(!S(n))return;var a=It(n),o=q(t)?a:t;if(o){if(n.style.display=n[ee]||"",It(n))n.style.display=ge(n.tagName)}else if(!a)n[ee]=z(n,"display"),n.style.display="none"})},c.hide=function(){return this.toggle(!1)},c.show=function(){return this.toggle(!0)};var re="___ce",jt=".",kt={focus:"focusin",blur:"focusout"},ne={mouseenter:"mouseover",mouseleave:"mouseout"},Me=/^(mouse|pointer|contextmenu|drag|drop|click|dblclick)/i;function pt(t){return ne[t]||kt[t]||t}function Et(t){var e=t.split(jt);return[e[0],e.slice(1).sort()]}c.trigger=function(t,e){if(D(t)){var n=Et(t),a=n[0],o=n[1],h=pt(a);if(!h)return this;var v=Me.test(h)?"MouseEvents":"HTMLEvents";t=i.createEvent(v),t.initEvent(h,!0,!0),t.namespace=o.join(jt),t.___ot=a}t.___td=e;var x=t.___ot in kt;return this.each(function(T,F){if(x&&G(F[t.___ot]))F["___i".concat(t.type)]=!0,F[t.___ot](),F["___i".concat(t.type)]=!1;F.dispatchEvent(t)})};function ie(t){return t[re]=t[re]||{}}function Be(t,e,n,a,o){var h=ie(t);h[e]=h[e]||[],h[e].push([n,a,o]),t.addEventListener(e,o)}function ue(t,e){return!e||!C.call(e,function(n){return t.indexOf(n)<0})}function vt(t,e,n,a,o){var h=ie(t);if(!e)for(e in h)vt(t,e,n,a,o);else if(h[e])h[e]=h[e].filter(function(v){var x=v[0],T=v[1],F=v[2];if(o&&F.guid!==o.guid||!ue(x,n)||a&&a!==T)return!0;t.removeEventListener(e,F)})}c.off=function(t,e,n){var a=this;if(q(t))this.each(function(h,v){if(!S(v)&&!J(v)&&!rt(v))return;vt(v)});else if(!D(t))for(var o in t)this.off(o,t[o]);else{if(G(e))n=e,e="";P(ft(t),function(h,v){var x=Et(v),T=x[0],F=x[1],w=pt(T);a.each(function(tt,M){if(!S(M)&&!J(M)&&!rt(M))return;vt(M,w,F,e,n)})})}return this},c.remove=function(t){return Y(this,t).detach().off(),this},c.replaceWith=function(t){return this.before(t).remove()},c.replaceAll=function(t){return s(t).replaceWith(this),this};function Ie(t,e,n,a,o){var h=this;if(!D(t)){for(var v in t)this.on(v,e,n,t[v],o);return this}if(!D(e))if(q(e)||dt(e))e="";else if(q(n))n=e,e="";else a=n,n=e,e="";if(!G(a))a=n,n=void 0;if(!a)return this;return P(ft(t),function(x,T){var F=Et(T),w=F[0],tt=F[1],M=pt(w),bt=w in ne,St=w in kt;if(!M)return;h.each(function(Ft,L){if(!S(L)&&!J(L)&&!rt(L))return;var Pt=function(R){if(R.target["___i".concat(R.type)])return R.stopImmediatePropagation();if(R.namespace&&!ue(tt,R.namespace.split(jt)))return;if(!e&&(St&&(R.target!==L||R.___ot===M)||bt&&R.relatedTarget&&L.contains(R.relatedTarget)))return;var Rt=L;if(e){var nt=R.target;while(!Wt(nt,e)){if(nt===L)return;if(nt=nt.parentNode,!nt)return}Rt=nt}Object.defineProperty(R,"currentTarget",{configurable:!0,get:function(){return Rt}}),Object.defineProperty(R,"delegateTarget",{configurable:!0,get:function(){return L}}),Object.defineProperty(R,"data",{configurable:!0,get:function(){return n}});var Ye=a.call(Rt,R,R.___td);if(o)vt(L,M,tt,e,Pt);if(Ye===!1)R.preventDefault(),R.stopPropagation()};Pt.guid=a.guid=a.guid||s.guid++,Be(L,M,tt,e,Pt)})}),this}c.on=Ie;function We(t,e,n,a){return this.on(t,e,n,a,!0)}c.one=We;var ze=/\r?\n/g;function Qe(t,e){return"&".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e.replace(ze,"\r\n")))}var Ze=/file|reset|submit|button|image/i,ae=/radio|checkbox/i;if(c.serialize=function(){var t="";return this.each(function(e,n){P(n.elements||[n],function(a,o){if(o.disabled||!o.name||o.tagName==="FIELDSET"||Ze.test(o.type)||ae.test(o.type)&&!o.checked)return;var h=Zt(o);if(!q(h)){var v=Z(h)?h:[h];P(v,function(x,T){t+=Qe(o.name,T)})}})}),t.slice(1)},typeof r!=="undefined")u.exports=s;else d.cash=d.$=s})()}),A=oe(de(),1);class le{default=window.navigator.language;LANGUAGE_DICTIONARIES={};setLang(r){if(this.default!==r)return this.default=r,!0;return!1}setDictionary(r,u){this.LANGUAGE_DICTIONARIES[r]=u}translate(r,u){if(u&&this.default==u)return{text:r,lang:this.default};u=u||this.default;const[i,d]=u.split("-");if(this.LANGUAGE_DICTIONARIES[i]&&r in this.LANGUAGE_DICTIONARIES[i]){if(typeof this.LANGUAGE_DICTIONARIES[i][r]==="object"){const l=this.LANGUAGE_DICTIONARIES[i][r];r=l[d||"*"]||l["*"]}else if(typeof this.LANGUAGE_DICTIONARIES[i][r]==="string")r=this.LANGUAGE_DICTIONARIES[i][r]}return{text:r,lang:u}}propagate(r){const u=this;function i(){const d=$(this),l=d.html(),E=d.attr("title"),k=d.attr("placeholder");let m;if(!/<\//.test(l)&&d.text()){const{text:j,lang:K}=u.translate(d.text());d.text(j),m=K}if(E){const{text:j,lang:K}=u.translate(E);d.attr("title",j),m=K}if(k){const{text:j,lang:K}=u.translate(k);d.attr("placeholder",j),m=K}m&&d.attr("lang",m)}return r.children().each(i),r}}class $e{debug;initialStats={elementCount:0,renderCount:0};stats=this.reset();constructor(r=!1){this.debug=r}inc(r){if(!this.debug)return;this.stats[r]++}dev(r){if(!this.debug)return;this.stats[r]--}record(r,u){if(!this.debug)return;this.stats[r]=u}reset(){return this.stats=ut(this.initialStats)}log(){this.debug&&console.table(this.stats)}}var Sr=oe(de(),1),it;class he{nsp;settings;$head;constructor(r,u){if(typeof r!=="string")throw new Error("Undefined or invalid styles attachement element(s) namespace");!it&&import("https://jspm.dev/sass").then((i)=>it=i),this.nsp=r,this.$head=Sr.default("head"),this.settings=u||{},this.settings&&this.load(this.settings)}compile(r){return new Promise((u,i)=>{if(!it){let d,l=1;d=setInterval(()=>{if(!it){if(l==8)clearInterval(d),i("Undefined Sass compiler");else l++;return}clearInterval(d),u(it.compileString(r))},1000)}else u(it.compileString(r))})}async inject(r){if(!r)throw new Error("Invalid injection arguments");const u=`rel="${this.settings.meta?"@":""}${this.nsp}"`;r=this.settings.meta?r:`[rel="${this.nsp}"] { ${r} }`;const i=await this.compile(r);if(!i?.css)throw new Error(`<component:${this.nsp}> css injection failed`);const d=await this.$head.find(`style[${u}]`);d.length?await d.html(i.css):await this.$head[this.settings.meta?"prepend":"append"](`<style ${u}>${i.css}</style>`)}async load(r){if(this.settings=r,typeof this.settings!=="object")throw new Error("Undefined styles settings");this.settings.css&&await this.inject(this.settings.css)}get(){}async clear(){(await this.$head.find(`style[rel="${this.settings.meta?"@":""}${this.nsp}"]`)).remove()}async custom(){return{}}async style(){return{}}}String.prototype.toCapitalCase=function(){return this.toLowerCase().replace(/(?:^|\s)\w/g,(r)=>{return r.toUpperCase()})};var Fr=(r,u)=>{if(typeof r!=="object"||typeof u!=="object"||!Object.keys(u).length)throw new Error("Invalid deep assign arguments");function i(l,E,k){const m=E.split("."),j=m.shift();if(!j)return;if(!(j in l)&&m.length)l[j]={};if(typeof l==="object"&&m.length)return l=l[j],i(l,m.join("."),k);l[j]=k}const d=JSON.parse(JSON.stringify(r));for(let l in u)i(d,l,u[l]);return d},Pr=function(r,u){u.add(r),r.dependencies.add(u)},Rr=function(r){for(let u of r.dependencies)u.delete(r);r.dependencies.clear()},xt=[],se={};Er(se,{handler:()=>{return Ar},default:()=>{return Kr},_static:()=>{return Dr}});var Vr=function(r){const u={};return r.split("&").map((i)=>{const[d,l]=i.split("=");u[d]=l}),u},Dr={global:!1,routes:[],defaultPath:null,currentPath:null,currentRoute:null,params:{},query:{}},Ar={onInput(){if(!this.input.routes)return;if(this.input.global)this.static.global=this.input.global;if(this.static.routes=this.input.routes.map(({path:r,template:u,default:i})=>{if(i)this.static.defaultPath=r;const d=r.match(/:[^\/]*(\/|$)/gi)||[],l=r.replaceAll("/","\\/").replaceAll(/:[^\/]*(\/|$)/gi,"([^\\/]+)(?:\\/|$)");return{path:r,template:u,default:i,pathVars:d,pathRegex:new RegExp(`${l}$`,"i")}}),this.input.global){const r=window.location.pathname;this.static.defaultPath=this.static.defaultPath&&r=="/"&&r!==this.static.defaultPath?this.static.defaultPath:r?r+window.location.search:this.static.routes[0].path}},onMount(){if(this.input.global)window.navigate=this.navigate.bind(this),window.addEventListener("popstate",(r)=>r.state&&this.navigate(r.state.path,!0));this.static.defaultPath&&this.navigate(this.static.defaultPath)},navigate(r,u){!u&&this.static.global&&history.pushState({path:r},"",r);const i=r.split("?");r=i[0];const d=i[1]?Vr(i[1]):{};let l=null;if(this.static.currentRoute)l={path:this.static.currentRoute.path,params:this.static.params},this.emit("before",{fromState:l,toState:{path:r,query:d}});const E=this.match(r);if(!E){this.static.currentRoute=null,this.static.params={},this.static.query={},this.emit("not-found",r);return}const{route:k,params:m}=E;this.emit("after",{fromState:l,toState:{path:k.path,params:m,query:d}}),this.static.currentPath=r,this.static.currentRoute=k,this.static.params=m,this.static.query=d,k.template.input={params:m,query:d};const j=this.lips?.render(r,k.template);if(!j){this.emit("not-found",r);return}this.getNode().empty().append(j.getNode())},match(r){const u={};let i=!1;for(let d of this.static.routes){const{pathVars:l,pathRegex:E}=d,k=r.match(E);if(k!==null&&k.index===0){for(let m=0;m+1<k.length&&m<l.length;m++)u[l[m].replaceAll(/[\/:]/g,"")]=k[m+1];i=d;break}}return i?{route:i,params:u}:!1}},Kr="<wrapper></wrapper>",_r=function(r){return(r||"").trim().replace(/<if\(\s*(.*?)\s*\)>/g,'<if by="$1">').replace(/<else-if\(\s*(.*?)\s*\)>/g,'<else-if by="$1">').replace(/<switch\(\s*(.*?)\s*\)>/g,'<switch by="$1">')};A.default.fn.extend({attrs:function(){const r={},u=this[0];return u&&A.default.each(u.attributes,function(){r[this.name]=this.value}),r},tagname:function(){const r=this.prop("tagName");if(!r)return!1;return r.toLowerCase()}});class Ut{debug=!1;context;store={};__root;i18n=new le;_setContext;_getContext;constructor(r){if(r?.debug)this.debug=r.debug;const[u,i]=Ct(r?.context||{});this._setContext=i,this._getContext=u,this.register("router",se)}async register(r,u){this.store[r]=u}unregister(r){delete this.store[r]}has(r){return r in this.store}import(r){if(!this.has(r))throw new Error(`<${r}> component not found`);if(!this.store[r].default)throw new Error(`Invalid <${r}> component`);return this.store[r]}render(r,u){const{default:i,...d}=u,l={debug:this.debug,prekey:"0",lips:this};return new Tt(r,i,d,l)}root(r,u){return this.__root=this.render("__ROOT__",r),this.__root.appendTo(u),this.__root}language(r){this.i18n.setLang(r)&&this.__root?.rerender()}setContext(r,u){typeof r=="string"?this._setContext({...this.context,[r]:u}):this._setContext({...this.context,...r})}useContext(r,u){fe(()=>{this.context=this._getContext();const i={};r.forEach((d)=>{if(!this.context)return;i[d]=this.context[d]}),typeof u==="function"&&u(i)})}}class Tt{template;$;input;state;static;context;__name__;__state;__stylesheet;__components={};__events={};__once_events={};__attachableEvents=[];NCC=0;prekey="0";debug=!1;isRendered=!1;_setInput;_setState;_getState;IUC;IUC_BEAT=5;lips;benchmark;constructor(r,u,{input:i,state:d,context:l,_static:E,handler:k,stylesheet:m},j){if(this.template=_r(u),j?.lips)this.lips=j.lips;if(j?.debug)this.debug=j.debug;if(j?.prekey)this.prekey=j.prekey;this.__name__=r;const K={css:m,meta:this.__name__==="__ROOT__"};this.__stylesheet=new he(this.__name__,K),this.benchmark=new $e(this.debug),this.input=i||{},this.state=d||{},this.static=E||{},this.context={},k&&this.setHandler(k);const[Z,_]=Ct(this.input),[f,b]=Ct(this.state),[O,g]=Ct(this.context);this._setInput=_,this._setState=b,this._getState=f,this.input&&Object.keys(this.input).length&&typeof this.onInput=="function"&&this.onInput.bind(this)(),this.IUC=setInterval(()=>{this.state&&!lt(this.__state,this.state)&&this.setState(this.state)},this.IUC_BEAT),Array.isArray(l)&&l.length&&this.lips?.useContext(l,(N)=>!lt(this.context,N)&&g(N)),fe(()=>{if(this.input=Z(),this.state=f(),this.context=O(),this.benchmark.reset(),this.NCC=0,this.__attachableEvents=[],this.isRendered)this.rerender();else typeof this.onCreate=="function"&&this.onCreate.bind(this)(),this.$=this.render(),this.$.attr("rel",this.__name__);this.detachEvents(),this.attachEvents(),this.benchmark.log(),this.__state=ut(this.state),!this.isRendered&&typeof this.onMount=="function"&&this.onMount.bind(this)(),this.isRendered=!0,typeof this.onRender=="function"&&this.onRender.bind(this)()})}getState(r){const u=this._getState();return u&&typeof u=="object"&&u[r]}setState(r){const u=this._getState();this._setState({...u,...r}),typeof this.onUpdate=="function"&&this.onUpdate.bind(this)()}setInput(r){if(lt(this.input,r))return;this._setInput({...this.input,...r}),typeof this.onInput=="function"&&this.onInput.bind(this)()}subInput(r){if(typeof r!=="object")return this.getNode();this.setInput(Fr(this.input,r))}setHandler(r){Object.entries(r).map(([u,i])=>this[u]=i.bind(this))}getNode(){if(!this.$)throw new Error("getNode() is expected to be call after component get rendered");return this.$}find(r){return this.$?.find(r)}render(r,u={}){const i=this;let d=A.default();function l(f){const b=f.attrs();if(!b)return;Object.entries(b).forEach(([O,g])=>{if(!g)return;u[O]=i.__evaluate__(g,u)}),i.benchmark.inc("elementCount")}function E(f){const b=f.contents(),O=i.__evaluate__(f.attr("in"),u);let g=A.default(),N=f.attr("from"),y=f.attr("to");if(N!==void 0){if(N=parseFloat(N),y==null)throw new Error("Expected <from> <to> attributes of the for loop to be defined");y=parseFloat(y);for(let C=N;C<=y;C++)if(b.length)g=g.add(i.render(b,{index:C}))}else if(Array.isArray(O)){let C=0;for(let p of O){if(b.length)g=g.add(i.render(b,{each:p,index:C}));C++}}else if(typeof O=="object"){let C=0;for(let p in O){if(b.length)g=g.add(i.render(b,{index:C,key:p,each:O[p]}));C++}}return i.benchmark.inc("elementCount"),g}function k(f){const b=f.attr("by");let O=A.default();if(b){const g=i.__evaluate__(b,u);let N=!1;f.children().each(function(){const y=A.default(this),C=y.contents(),p=y.attr("is");if(N||!p)return;if(y.is("case")&&i.__evaluate__(p,u)===g){if(N=!0,C.length)O=O.add(i.render(C,u))}else if(y.is("default")&&!N&&C.length)O=O.add(i.render(C,u))})}return i.benchmark.inc("elementCount"),O}function m(f){const b=A.default(),O=f.contents(),g=f.attr("by");if(g&&O.length){if(i.__evaluate__(g,u))return i.render(O,u);let N=f.nextAll("else-if, else").first();while(N.length>0){const y=N.contents();if(N.is("else-if")){const C=N.attr("by");if(i.__evaluate__(C,u)&&y.length)return i.render(y,u)}else if(N.is("else")&&y.length)return i.render(y,u);N=N.nextAll("else-if, else").first()}}return i.benchmark.inc("elementCount"),b}function j(f){const b=f.attr("await");if(!b)throw new Error("Undefined async <await> attribute");const O=f.find("preload").clone(),g=f.find("resolve").clone(),N=f.find("catch").clone();let y=A.default();const C=O.contents();if(C.length)y=y.add(i.render(C,u));const[p,...V]=b.trim().split(/\s*,\s*/),H=(i[p]||i.__evaluate__(p,u)).bind(i);if(typeof H!=="function")throw new Error(`Undefined <${p}> handler method`);const ct=V.map((W)=>i.__evaluate__(W,u));return H(...ct).then((W)=>{const U=g?.contents();U.length&&y.replaceWith(i.render(U,{...u,response:W}))}).catch((W)=>{const U=N?.contents();U.length&&y.replaceWith(i.render(U,{...u,error:W}))}),i.benchmark.inc("elementCount"),y}function K(f){const b=f.prop("tagName")?.toLowerCase();if(!b)throw new Error("Invalid component");if(!i.lips)throw new Error("Nexted component manager is disable");const O=`${i.prekey}.${i.NCC++}`,g={},N=f.attrs(),y={};Object.entries(N).forEach(([V,H])=>{if(V=="key")return;if(/^on-/.test(V)){y[V.replace(/^on-/,"")]=H;return}g[V]=H?i.__evaluate__(H,u):!0});const C=f.contents();if(C){const V=i.render(C,u);g.__innerHtml=V.html()||V.text()}let p=A.default();if(i.__components[O])i.__components[O].setInput(ut(g)),p=p.add(i.__components[O].getNode());else{const{state:V,_static:H,handler:ct,context:W,default:U,stylesheet:$t}=i.lips.import(b),c=new Tt(b,U,{state:ut(V),input:ut(g),context:W,_static:ut(H),handler:ct,stylesheet:$t},{debug:i.debug,lips:i.lips,prekey:O});p=p.add(c.getNode()),i.__components[O]=c,Object.entries(y).forEach(([s,ot])=>i.__attachEvent__(c,s,ot,u))}return i.benchmark.inc("elementCount"),p}function Z(f){if(!f.length||!f.prop("tagName"))return f;const b=A.default(`<${f.prop("tagName").toLowerCase()}/>`),O=f.contents();O.length&&b.append(i.render(O,u));const g=f.attrs();return g&&Object.entries(g).forEach(([N,y])=>{if(/^on-/.test(N)){i.__attachableEvents.push({$node:b,_event:N.replace(/^on-/,""),instruction:y,scope:u});return}switch(N){case"html":b.html(i.__evaluate__(y,u));break;case"text":{let C=i.__evaluate__(y,u);if(i.lips&&!f.is("[no-translate]")){const{text:p}=i.lips.i18n.translate(C);C=p}b.text(C)}break;case"style":{const C=i.__evaluate__(y,u);if(typeof C==="object"){let p="";Object.entries(C).forEach(([V,H])=>p+=`${V}:${H};`),p.length&&b.attr("style",p)}else b.attr("style",C)}break;default:{const C=y?i.__evaluate__(y,u):!0;C!="?"?b.attr(N,C):b.removeAttr(N)}}}),i.benchmark.inc("elementCount"),b}function _(f){if(f.get(0)?.nodeType===Node.TEXT_NODE)return document.createTextNode(i.__interpolate__(f.text(),u));if(f.is("let"))return l(f);else if(f.is("if"))return m(f);else if(f.is("else-if, else"))return;else if(f.is("for"))return E(f);else if(f.is("switch"))return k(f);else if(f.is("async"))return j(f);else if(i.lips&&i.lips.has(f.prop("tagName")?.toLowerCase()))return K(f);return Z(f)}if(r&&!r.length)return console.warn("Undefined node element to render"),r;try{r=r||A.default(this.template),r.each(function(){const f=_(A.default(this));if(f)d=d.add(f)})}catch(f){console.error("Rendering Failed --",f)}return i.benchmark.inc("renderCount"),d}rerender(){if(!this.template)throw new Error("Component template is empty");const r=this.render();this.$?.replaceWith(r),this.$=r,this.$.attr("rel",this.__name__)}__evaluate__(r,u){try{r=r.trim();const i=u?`with( scope ){ return ${r}; }`:`return ${r}`;return new Function("self","input","state","static","context","scope",i)(this,this.input,this.state,this.static,this.context,u||{})}catch(i){return r}}__interpolate__(r,u){return r.replace(/{\s*([^{}]+)\s*}/g,(i,d)=>this.__evaluate__(d,u))}__attachEvent__(r,u,i,d){if(/(\s*\w+|\s*\([^)]*\)|\s*)\s*=>\s*(\s*\{[^}]*\}|\s*[^\n;"]+)/g.test(i))r.on(u,this.__evaluate__(i,d));else{const[l,...E]=i.split(/\s*,\s*/);if(typeof this[l]!=="function")return;r.on(u,(...k)=>{const m=this[l].bind(this);let j=E.map((K)=>this.__evaluate__(K,d));if(k.length)j=[...j,...k];m(...j)})}}__detachEvent__(r,u){r.off(u)}attachEvents(){this.__attachableEvents.forEach(({$node:r,_event:u,instruction:i,scope:d})=>{r.off(u)&&this.__attachEvent__(r,u,i,d)}),Object.values(this.__components).forEach((r)=>r.attachEvents())}detachEvents(){this.__attachableEvents.forEach(({$node:r,_event:u})=>this.__detachEvent__(r,u)),Object.values(this.__components).forEach((r)=>r.detachEvents())}destroy(){for(let r in this.__components)this.__components[r].destroy(),delete this.__components[r];this.detachEvents(),this.$?.remove(),this.__stylesheet?.clear(),clearInterval(this.IUC)}appendTo(r){const u=typeof r=="string"?A.default(r):r;return this.$?.length&&u.append(this.$),this}prependTo(r){const u=typeof r=="string"?A.default(r):r;return this.$?.length&&u.prepend(this.$),this}replaceWith(r){const u=typeof r=="string"?A.default(r):r;return this.$?.length&&u.replaceWith(this.$),this}on(r,u){if(!Array.isArray(this.__events[r]))this.__events[r]=[];return this.__events[r].push(u),this}once(r,u){if(!Array.isArray(this.__once_events[r]))this.__once_events[r]=[];return this.__once_events[r].push(u),this}off(r){return delete this.__events[r],delete this.__once_events[r],this}emit(r,...u){this.__events[r]?.forEach((i)=>i(...u)),this.__once_events[r]?.forEach((i)=>i(...u)),delete this.__once_events[r]}}var ve={Undo:"Undo",Redo:"Redo",Reinitialize:"Reinitialize",Settings:"Settings",Link:"Link","Device Screens":{"*":"Device Screens",UK:"Media Devices"},Bold:"Bold",Count:"Count"};var be={Undo:"Annuler",Redo:"Refaire",Reinitialize:"R\xE9initialiser",Settings:"Param\xEAtre",Link:"Lien","Device Screens":"Dispositifs",Bold:"Gras",Button:"Bouton",Count:"Compter"};var at=new Ut;at.setContext({lang:"en-US",online:!0,getUser(r){return new Promise((u,i)=>{setTimeout(()=>u({name:r,email:"g.peter@mail.com"}),3000)})}});at.i18n.setDictionary("en",ve);at.i18n.setDictionary("fr",be);ce(at);at.root(_t,"body");setTimeout(()=>{at.setContext("online",!1)},5000);setTimeout(()=>window.navigate("/account?userid=1234"),2000);

//# debugId=05391EE1E7A65BF864756e2164756e21
