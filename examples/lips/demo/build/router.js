var H=Object.create;var{defineProperty:F,getPrototypeOf:I,getOwnPropertyNames:J}=Object;var K=Object.prototype.hasOwnProperty;var W=(i,w,z)=>{z=i!=null?H(I(i)):{};const A=w||!i||!i.__esModule?F(z,"default",{value:i,enumerable:!0}):z;for(let B of J(i))if(!K.call(A,B))F(A,B,{get:()=>i[B],enumerable:!0});return A};var X=(i)=>{return import.meta.require(i)};var L=(i,w)=>{for(var z in w)F(i,z,{get:w[z],enumerable:!0,configurable:!0,set:(A)=>w[z]=()=>A})};var U={};L(U,{handler:()=>{{return O}},default:()=>{{return T}},_static:()=>{{return M}}});var N=function(i){const w={};return i.split("&").map((A)=>{const[B,E]=A.split("=");w[B]=E}),w},M={global:!1,routes:[],currentPath:"/",currentRoute:null,params:{},query:{}},O={onInput(){if(!this.input.routes)return;if(this.input.global)this.static.global=this.input.global;let i;if(this.static.routes=this.input.routes.map(({path:w,template:z,default:A})=>{if(A)i=w;const B=w.match(/:[^\/]*(\/|$)/gi)||[],E=w.replaceAll("/","\\/").replaceAll(/:[^\/]*(\/|$)/gi,"([^\\/]+)(?:\\/|$)");return{path:w,template:z,default:A,pathVars:B,pathRegex:new RegExp(`${E}\$`,"i")}}),this.input.global){const w=window.location.pathname;i=i&&w=="/"&&w!==i?i:w?w+window.location.search:this.static.routes[0].path}this.navigate(i)},onMount(){if(this.input.global)window.navigate=this.navigate.bind(this),window.addEventListener("popstate",(i)=>i.state&&this.navigate(i.state.path,!0))},navigate(i,w){!w&&this.static.global&&history.pushState({path:i},"",i);const z=i.split("?");i=z[0];const A=z[1]?N(z[1]):{};let B=null;if(this.static.currentRoute)B={path:this.static.currentRoute.path,params:this.static.params},this.emit("before",{fromState:B,toState:{path:i,query:A}});const E=this.match(i);if(!E){this.static.currentRoute=null,this.static.params={},this.static.query={},this.emit("not-found",i);return}const{route:C,params:D}=E;this.emit("after",{fromState:B,toState:{path:C.path,params:D,query:A}}),this.static.currentPath=i,this.static.currentRoute=C,this.static.params=D,this.static.query=A,C.template.input={params:D,query:A};const G=this.lips?.render(i,C.template);if(!G){this.emit("not-found",i);return}this.getEl().empty().append(G.getEl())},match(i){const w={};let z=!1;for(let A of this.static.routes){const{pathVars:B,pathRegex:E}=A,C=i.match(E);if(C!==null&&C.index===0){for(let D=0;D+1<C.length&&D<B.length;D++)w[B[D].replaceAll(/[\/:]/g,"")]=C[D+1];z=A;break}}return z?{route:z,params:w}:!1}},T="<wrapper></wrapper>";export{O as handler,T as default,M as _static};

//# debugId=2A81AAB173D680CE64756e2164756e21
