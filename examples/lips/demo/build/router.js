var F=Object.create;var{defineProperty:D,getPrototypeOf:G,getOwnPropertyNames:H}=Object;var I=Object.prototype.hasOwnProperty;var T=(n,i,A)=>{A=n!=null?F(G(n)):{};const v=i||!n||!n.__esModule?D(A,"default",{value:n,enumerable:!0}):A;for(let w of H(n))if(!I.call(v,w))D(v,w,{get:()=>n[w],enumerable:!0});return v};var U=(n)=>{return import.meta.require(n)};var J=(n,i)=>{for(var A in i)D(n,A,{get:i[A],enumerable:!0,configurable:!0,set:(v)=>i[A]=()=>v})};var O={};J(O,{handler:()=>{{return M}},default:()=>{{return N}},_static:()=>{{return K}}});var L=function(n){const i={};return n.split("&").map((v)=>{const[w,C]=v.split("=");i[w]=C}),i},K={global:!1,routes:[],currentPath:"/",currentRoute:null,params:{},query:{}},M={onInput(){if(!this.input.routes)return;if(this.input.global)this.static.global=this.input.global;let n;if(this.static.routes=this.input.routes.map(({path:i,template:A,default:v})=>{if(v)n=i;const w=i.match(/:[^\/]*(\/|$)/gi)||[],C=i.replaceAll("/","\\/").replaceAll(/:[^\/]*(\/|$)/gi,"([^\\/]+)(?:\\/|$)");return{path:i,template:A,default:v,pathVars:w,pathRegex:new RegExp(`${C}\$`,"i")}}),this.input.global){const i=window.location.pathname;n=n&&i=="/"&&i!==n?n:i?i+window.location.search:this.static.routes[0].path}this.navigate(n)},onMount(){if(this.input.global)window.navigate=this.navigate.bind(this),window.addEventListener("popstate",(n)=>n.state&&this.navigate(n.state.path,!0))},navigate(n,i){!i&&this.static.global&&history.pushState({path:n},"",n);const A=n.split("?");n=A[0];const v=A[1]?L(A[1]):{};let w=null;if(this.static.currentRoute)w={path:this.static.currentRoute.path,params:this.static.params},this.emit("before",{fromState:w,toState:{path:n,query:v}});const C=this.match(n);if(!C){this.static.currentRoute=null,this.static.params={},this.static.query={},this.emit("not-found",n);return}const{route:z,params:B}=C;this.emit("after",{fromState:w,toState:{path:z.path,params:B,query:v}}),this.static.currentPath=n,this.static.currentRoute=z,this.static.params=B,this.static.query=v,z.template.input={params:B,query:v};const E=this.lips?.render(n,z.template);if(!E){this.emit("not-found",n);return}this.getEl().empty().append(E.getEl())},match(n){const i={};let A=!1;for(let v of this.static.routes){const{pathVars:w,pathRegex:C}=v,z=n.match(C);if(z!==null&&z.index===0){for(let B=0;B+1<z.length&&B<w.length;B++)i[w[B].replaceAll(/[\/:]/g,"")]=z[B+1];A=v;break}}return A?{route:A,params:i}:!1}},N="<wrapper></wrapper>";export{M as handler,N as default,K as _static};

//# debugId=3BED3C065CDB2EDD64756e2164756e21
